# REQ-1: 9档模式珠子滑动功能

## 需求描述
用户在9档自由模式中，用手指在珠子上滑动时，珠子应正确响应并移动到目标位置。

## 功能规格

### 上珠（天珠）滑动
- **向下滑动上珠** → 上珠激活（靠近横梁）
- **向上滑动上珠** → 上珠复位（远离横梁）

### 下珠（地珠）滑动
- **向上滑动下珠** → 下珠激活（靠近横梁）
- **向下滑动下珠** → 下珠复位（远离横梁）

## 约束条件

| 参数 | 值 | 说明 |
|------|-----|------|
| DRAG_THRESHOLD | 8px | 移动距离超过此值才触发状态变化 |
| 坐标轴映射 | 条件性 | inputRotated=true 时使用 clientX，否则使用 clientY |

## 验收标准

### AC-1.1: 上珠向下滑动激活
- **前置条件**: 9档自由模式，上珠未激活
- **操作**: 在上珠上向下滑动 >= 8px
- **预期结果**: 上珠移动到横梁位置（激活），数值 +5

### AC-1.2: 上珠向上滑动复位
- **前置条件**: 9档自由模式，上珠已激活
- **操作**: 在上珠上向上滑动 >= 8px
- **预期结果**: 上珠移动到顶部位置（复位），数值 -5

### AC-1.3: 下珠向上滑动激活
- **前置条件**: 9档自由模式，下珠未激活
- **操作**: 在下珠上向上滑动 >= 8px
- **预期结果**: 下珠移动到横梁位置（激活），数值 +1

### AC-1.4: 下珠向下滑动复位
- **前置条件**: 9档自由模式，下珠已激活
- **操作**: 在下珠上向下滑动 >= 8px
- **预期结果**: 下珠移动到底部位置（复位），数值 -1

### AC-1.5: 小于阈值不触发
- **前置条件**: 9档自由模式
- **操作**: 在任意珠子上滑动 < 8px
- **预期结果**: 珠子状态不变

## PBT 属性

### PROP-1.1: 单调性
- **INVARIANT**: 上珠向下拖动跨过阈值只会激活，不会取消激活；下珠向上拖动跨过阈值只会激活，不会取消激活
- **FALSIFICATION**: 随机生成拖动方向与距离，检查是否出现反向状态变化

### PROP-1.2: 往返性
- **INVARIANT**: 同一珠子完成一次有效激活拖动后，再以相反方向完成一次有效拖动，应回到初始状态
- **FALSIFICATION**: 生成成对拖动序列，验证最终状态等于初始状态

### PROP-1.3: 幂等性
- **INVARIANT**: 同方向的连续有效拖动在已达目标状态后不应继续改变状态
- **FALSIFICATION**: 对已激活上珠重复下拖，检查状态是否继续变化

### PROP-1.4: 值域保持
- **INVARIANT**: 任意拖动序列后，每一档的数值必须在 [0, 9]
- **FALSIFICATION**: 随机长序列操作后检查边界

### PROP-1.5: 阈值边界
- **INVARIANT**: 拖动距离 < 8px 不应改变珠子状态
- **FALSIFICATION**: 生成 0-7px 的拖动，检查状态是否变化
